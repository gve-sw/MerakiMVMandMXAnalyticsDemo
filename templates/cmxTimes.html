{% extends "base.html" %}

{% block title %}CMX Times{% endblock %}

{% block pageTitle %}CMX Times{% endblock %}

{% block section1title %}<h2>Aggregated CMX Times</h2>{% endblock %}

{% block section1content %}
<!-- bar chart canvas element using chart.js -->
<canvas id="chart" width="300" height="200"></canvas>


<div class="responsive-table">
    <table class="table table--lined table--compressed">

        <thead>
            <tr>
                <th>MAC</th>
                <th>Visits</th>
                <th>Total Time</th>
                <th>First Seen</th>
                <th>Last Seen</th? </tr> </thead> <tbody>
                    {% for x in cmxData %}
            <tr>
                <td>{{ x['MAC'] }}</td>
                <td>{{ x['visits'] }}</td>
                <td>{{ x['totalTime'] }}</td>
                {% for y in x['timeData'] %}
                <td>{{ y['firstSeen'] }}</td>
                <td>{{ y['lastSeen'] }}</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                {% endfor %}
                <td></td>
                <td></td>
            </tr>
            {% endfor %}

            </tbody>

    </table>
</div>
{% endblock %}


{% block js %}



<!-- import plugin script for charts from chart.js -->
<script src="{{ url_for('static', filename='public/js/Chart.min.js') }}"></script>


<script>
    // bar chart data
    var barData = {
        labels: {{ cmxlabels | safe }},
    datasets: [
        {
            fillColor: "rgba(151,187,205,0.2)",
            strokeColor: "rgba(151,187,205,1)",
            pointColor: "rgba(151,187,205,1)",
            data: {{ cmxvalues }}
               }
    ]
            }
    // get bar chart canvas
    var mychart = document.getElementById("chart").getContext("2d");
    steps = 10
    max = 10
    // draw bar chart
    new Chart(mychart).Bar(barData, {
        scaleOverride: true,
        scaleSteps: steps,
        scaleStepWidth: Math.ceil(max / steps),
        scaleStartValue: 0,
        scaleShowVerticalLines: true,
        scaleShowGridLines: true,
        barShowStroke: true,
        scaleShowLabels: true
    });
</script>
{% endblock %}